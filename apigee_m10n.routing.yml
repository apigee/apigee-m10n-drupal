apigee_m10n.settings:
  path: /admin/config/apigee-edge/monetization
  defaults:
    _controller: \Drupal\system\Controller\SystemController::systemAdminMenuBlockPage
    _title: "Monetization"
  requirements:
    _permission: 'administer apigee monetization'
  options:
    # This enables monetization check for this route.
    _apigee_monetization_route: TRUE

apigee_m10n.settings.rate_plan:
  path: 'admin/config/apigee-edge/monetization/rate-plan-settings'
  defaults:
    _form: '\Drupal\apigee_m10n\Form\RatePlanConfigForm'
    _title: 'Rate plan settings'
  requirements:
    _permission: 'administer apigee monetization'
  options:
    _apigee_monetization_route: TRUE

apigee_m10n.settings.subscription:
  path: 'admin/config/apigee-edge/monetization/subscription-settings'
  defaults:
    _form: '\Drupal\apigee_m10n\Form\SubscriptionConfigForm'
    _title: 'Rate plan purchase settings'
  requirements:
    _permission: 'administer apigee monetization'
  options:
    _apigee_monetization_route: TRUE

entity.package.collection:
  path: 'admin/config/apigee-edge/monetization/packages'
  defaults:
    _entity_list: 'package'
    _title: 'Packages'
  requirements:
    _permission: 'administer package'
  options:
    _apigee_monetization_route: TRUE

apigee_monetization.my_billing:
  path: /user/monetization/billing
  defaults:
    _controller: \Drupal\apigee_m10n\Controller\BillingController::myPrepaidBalance
  requirements:
    _permission: 'view mint prepaid reports'
  options:
    _apigee_monetization_route: TRUE

apigee_monetization.billing:
  path: /user/{user}/monetization/billing
  defaults:
    _controller: \Drupal\apigee_m10n\Controller\BillingController::prepaidBalancePage
    _title: 'Prepaid balance'
  requirements:
    _permission: 'view mint prepaid reports'
  options:
    _apigee_monetization_route: TRUE

apigee_monetization.my_packages:
  path: /user/monetization/packages
  defaults:
    _controller: \Drupal\apigee_m10n\Controller\PackagesController::myCatalog
  requirements:
    _permission: 'access monetization packages'
  options:
    _apigee_monetization_route: TRUE

apigee_monetization.packages:
  path: /user/{user}/monetization/packages
  defaults:
    _controller: \Drupal\apigee_m10n\Controller\PackagesController::catalogPage
    _title: "Packages"
  requirements:
    _permission: 'access monetization packages'
  options:
    _apigee_monetization_route: TRUE

apigee_monetization.my_subscriptions:
  path: /user/monetization/subscriptions
  defaults:
    _controller: \Drupal\apigee_m10n\Controller\PackagesController::mySubscriptions
  requirements:
    _permission: 'view subscription'
  options:
    _apigee_monetization_route: TRUE

entity.subscription.collection_by_developer:
  path: '/user/{user}/monetization/subscriptions'
  defaults:
    _controller: '\Drupal\apigee_m10n\Entity\ListBuilder\SubscriptionListBuilderForDeveloper::render'
    _title_callback: '\Drupal\apigee_m10n\Entity\ListBuilder\SubscriptionListBuilderForDeveloper::getPageTitle'
  requirements:
    user: '\d+'
    _permission: 'view subscription'
  options:
    _apigee_monetization_route: TRUE

entity.rate_plan.canonical:
  path: '/user/{user}/monetization/packages/{package}/plan/{rate_plan}'
  defaults:
    _entity_view: 'rate_plan.full'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::title'
  requirements:
    _entity_access: 'rate_plan.view'
  options:
    _apigee_monetization_route: TRUE
    parameters:
      user:
        type: 'entity:user'
      rate_plan:
        type: 'entity:rate_plan'
        converter: paramconverter.entity.rate_plan

entity.rate_plan.subscribe:
  path: '/user/{user}/monetization/packages/{package}/plan/{rate_plan}/subscribe'
  defaults:
    _controller: '\Drupal\apigee_m10n\Entity\Controller\RatePlanSubscribeController::subscribeForm'
    _title_callback: '\Drupal\apigee_m10n\Entity\Controller\RatePlanSubscribeController::title'
  requirements:
    _entity_access: 'rate_plan.subscribe'
  options:
    _apigee_monetization_route: TRUE

entity.subscription.unsubscribe_form:
  path: '/user/{user}/monetization/subscription/{subscription}/unsubscribe'
  defaults:
    _entity_form: 'subscription.unsubscribe'
    _title_callback: '\Drupal\Core\Entity\Controller\EntityController::title'
  requirements:
    _entity_access: 'subscription.update'
  options:
    _apigee_monetization_route: TRUE
    parameters:
      user:
        type: 'entity:user'
      subscription:
        type: 'entity:subscription'
        converter: paramconverter.entity.subscription
